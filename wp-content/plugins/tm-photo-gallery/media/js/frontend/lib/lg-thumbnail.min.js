!function(e,t,s,i){"use strict";var l={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toogleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:50,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:!0},o=function(t){return this.core=e(t).data("lightGallery"),this.core.s=e.extend({},l,this.core.s),this.$el=e(t),this.$thumbOuter=null,this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin),this.thumbIndex=this.core.index,this.left=0,this.init(),this};o.prototype.init=function(){var e=this;this.core.s.thumbnail&&this.core.$items.length>1&&(this.core.s.showThumbByDefault&&setTimeout(function(){e.core.$outer.addClass("lg-thumb-open")},700),this.core.s.pullCaptionUp&&this.core.$outer.addClass("lg-pull-caption-up"),this.build(),this.core.s.animateThumb?(this.core.s.enableThumbDrag&&!this.core.isTouch&&this.core.doCss()&&this.enableThumbDrag(),this.core.s.enableThumbSwipe&&this.core.isTouch&&this.core.doCss()&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toogle(),this.thumbkeyPress())},o.prototype.build=function(){function s(e,t,s){var i,r=l.core.isVideo(e,s)||{},n="";r.youtube||r.vimeo||r.dailymotion?r.youtube?i=l.core.s.loadYoutubeThumbnail?"//img.youtube.com/vi/"+r.youtube[1]+"/"+l.core.s.youtubeThumbSize+".jpg":t:r.vimeo?l.core.s.loadVimeoThumbnail?(i="//i.vimeocdn.com/video/error_"+a+".jpg",n=r.vimeo[1]):i=t:r.dailymotion&&(i=l.core.s.loadDailymotionThumbnail?"//www.dailymotion.com/thumbnail/video/"+r.dailymotion[1]:t):i=t,o+='<div data-vimeo-id="'+n+'" class="lg-thumb-item" style="width:'+l.core.s.thumbWidth+"px; margin-right: "+l.core.s.thumbMargin+'px"><img src="'+i+'" /></div>',n=""}var i,l=this,o="",a="",r='<div class="lg-thumb-outer"><div class="lg-thumb group"></div></div>';switch(this.core.s.vimeoThumbSize){case"thumbnail_large":a="640";break;case"thumbnail_medium":a="200x150";break;case"thumbnail_small":a="100x75"}if(l.core.$outer.addClass("lg-has-thumb"),l.core.$outer.find(".lg").append(r),l.$thumbOuter=l.core.$outer.find(".lg-thumb-outer"),l.thumbOuterWidth=l.$thumbOuter.width(),l.core.s.animateThumb&&l.core.$outer.find(".lg-thumb").css({width:l.thumbTotalWidth+"px",position:"relative"}),this.core.s.animateThumb&&l.$thumbOuter.css("height",l.core.s.thumbContHeight+"px"),l.core.s.dynamic)for(var n=0;n<l.core.s.dynamicEl.length;n++)s(l.core.s.dynamicEl[n].src,l.core.s.dynamicEl[n].thumb,n);else l.core.$items.each(function(t){l.core.s.exThumbImage?s(e(this).attr("href")||e(this).attr("data-src"),e(this).attr(l.core.s.exThumbImage),t):s(e(this).attr("href")||e(this).attr("data-src"),e(this).find("img").attr("src"),t)});l.core.$outer.find(".lg-thumb").html(o),i=l.core.$outer.find(".lg-thumb-item"),i.each(function(){var t=e(this),s=t.attr("data-vimeo-id");s&&e.getJSON("//www.vimeo.com/api/v2/video/"+s+".json?callback=?",{format:"json"},function(e){t.find("img").attr("src",e[0][l.core.s.vimeoThumbSize])})}),i.eq(l.core.index).addClass("active"),l.core.$el.on("onBeforeSlide.lg.tm",function(){i.removeClass("active"),i.eq(l.core.index).addClass("active")}),i.on("click.lg touchend.lg",function(){var t=e(this);setTimeout(function(){(l.thumbClickable&&!l.core.lgBusy||!l.core.doCss())&&(l.core.index=t.index(),l.core.slide(l.core.index,!1,!0))},50)}),l.core.$el.on("onBeforeSlide.lg.tm",function(){l.animateThumb(l.core.index)}),e(t).on("resize.lg.thumb orientationchange.lg.thumb",function(){setTimeout(function(){l.animateThumb(l.core.index),l.thumbOuterWidth=l.$thumbOuter.width()},200)})},o.prototype.setTranslate=function(e){this.core.$outer.find(".lg-thumb").css({transform:"translate3d(-"+e+"px, 0px, 0px)"})},o.prototype.animateThumb=function(e){var t=this.core.$outer.find(".lg-thumb");if(this.core.s.animateThumb){var s;switch(this.core.s.currentPagerPosition){case"left":s=0;break;case"middle":s=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":s=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*e-1-s,this.left>this.thumbTotalWidth-this.thumbOuterWidth&&(this.left=this.thumbTotalWidth-this.thumbOuterWidth),this.left<0&&(this.left=0),this.core.lGalleryOn?(t.hasClass("on")||this.core.$outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms"),this.core.doCss()||t.animate({left:-this.left+"px"},this.core.s.speed)):this.core.doCss()||t.css("left",-this.left+"px"),this.setTranslate(this.left)}},o.prototype.enableThumbDrag=function(){var s=this,i=0,l=0,o=!1,a=!1,r=0;s.$thumbOuter.addClass("lg-grab"),s.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb",function(e){s.thumbTotalWidth>s.thumbOuterWidth&&(e.preventDefault(),i=e.pageX,o=!0,s.core.$outer.scrollLeft+=1,s.core.$outer.scrollLeft-=1,s.thumbClickable=!1,s.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),e(t).on("mousemove.lg.thumb",function(e){o&&(r=s.left,a=!0,l=e.pageX,s.$thumbOuter.addClass("lg-dragging"),r-=l-i,r>s.thumbTotalWidth-s.thumbOuterWidth&&(r=s.thumbTotalWidth-s.thumbOuterWidth),0>r&&(r=0),s.setTranslate(r))}),e(t).on("mouseup.lg.thumb",function(){a?(a=!1,s.$thumbOuter.removeClass("lg-dragging"),s.left=r,Math.abs(l-i)<s.core.s.swipeThreshold&&(s.thumbClickable=!0)):s.thumbClickable=!0,o&&(o=!1,s.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab"))})},o.prototype.enableThumbSwipe=function(){var e=this,t=0,s=0,i=!1,l=0;e.core.$outer.find(".lg-thumb").on("touchstart.lg",function(s){e.thumbTotalWidth>e.thumbOuterWidth&&(s.preventDefault(),t=s.originalEvent.targetTouches[0].pageX,e.thumbClickable=!1)}),e.core.$outer.find(".lg-thumb").on("touchmove.lg",function(o){e.thumbTotalWidth>e.thumbOuterWidth&&(o.preventDefault(),s=o.originalEvent.targetTouches[0].pageX,i=!0,e.$thumbOuter.addClass("lg-dragging"),l=e.left,l-=s-t,l>e.thumbTotalWidth-e.thumbOuterWidth&&(l=e.thumbTotalWidth-e.thumbOuterWidth),0>l&&(l=0),e.setTranslate(l))}),e.core.$outer.find(".lg-thumb").on("touchend.lg",function(){e.thumbTotalWidth>e.thumbOuterWidth&&i?(i=!1,e.$thumbOuter.removeClass("lg-dragging"),Math.abs(s-t)<e.core.s.swipeThreshold&&(e.thumbClickable=!0),e.left=l):e.thumbClickable=!0})},o.prototype.toogle=function(){var e=this;e.core.s.toogleThumb&&(e.core.$outer.addClass("lg-can-toggle"),e.$thumbOuter.append('<span class="lg-toogle-thumb lg-icon"></span>'),e.core.$outer.find(".lg-toogle-thumb").on("click.lg",function(){e.core.$outer.toggleClass("lg-thumb-open")}))},o.prototype.thumbkeyPress=function(){var s=this;e(t).on("keydown.lg.thumb",function(e){38===e.keyCode?(e.preventDefault(),s.core.$outer.addClass("lg-thumb-open")):40===e.keyCode&&(e.preventDefault(),s.core.$outer.removeClass("lg-thumb-open"))})},o.prototype.destroy=function(){this.core.s.thumbnail&&this.core.$items.length>1&&(e(t).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb"),this.$thumbOuter.remove(),this.core.$outer.removeClass("lg-has-thumb"))},e.fn.lightGallery.modules.Thumbnail=o}(jQuery,window,document);
